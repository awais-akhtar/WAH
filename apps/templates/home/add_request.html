{% extends "layouts/base.html" %}

{% block title %} add request {% endblock %} 

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">
{% endblock stylesheets %}

{% block content %}
    <!-- [ Main Content ] start -->
    <div class="pcoded-main-container">
        <div class="pcoded-wrapper">
            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <!-- [ breadcrumb ] end -->
                    <div class="main-body">
                        <div class="page-wrapper">
                            <!-- [ Main Content ] start -->
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col">
                                          <div class="card">
                                              <div class="card-body">
                                                <form class="form-inline" action="{% url 'add_request' %}" method="post" >
                                                  {% csrf_token %}
                                                  <div class="form-group mx-sm-3 mb-2">
                                                      <label for="inputPassword2" class="sr-only">Employee ID:</label>
                                                      <input type="text" class="form-control" name="text"  placeholder="Enter employee id..." required>
                                                  </div>
                                                  <input type="submit" class="btn btn-outline-info btn-glow-info mb-2" value="Search">
                                              </form>
                                              </div>
                                          </div>
                                  </div>
        {% if messages %}
        <div class="alert alert-info alert-dismissible fade show m-3" role="alert" >
            {% for message in messages %}
            <strong> {{message}}</strong>
            {% endfor %}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        {% endif %}
                                    <!-- Input group -->
                                    {% if obj %}
                                    <div class="card m-3">
                                      <div class="card-header">
                                        Employee Status:
                                        {% if data2 == 'Active' %}
                                        {% comment %} <label class="font-weight-bold mt-4">Status:</label> {% endcomment %}
                                        <label class="badge badge-success m-2 ">{{data2}}</label>
                                        {% else %}
                                        <span class="badge badge-danger m-2">{{data2}}</span>
                                        {% endif %}
                                      </div>
                                     <form action="{% url 'request_data' %}" method="post" >
                                      {% csrf_token %}
                                      <div class="card-body">
                                        <div class="row">
                                          {% for item in obj%}
                                          <div class="col-md-6 ">
                                              <label class="font-weight-bold">Name</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.Name}}</label>
                                              <label class="font-weight-bold">Email</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.Email}}</label>
                                              <label class="font-weight-bold">Current Designation</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.Current_Designation}}</label>
                                              <label class="font-weight-bold">Department</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.Department}}</label>
                                              {% if data2 == 'Active'  %}
                                              <input type="hidden" name="employee_id" value={{item.EMPLOYEEOID}}>
                                              {% comment %} <label class="font-weight-bold">CNIC</label>
                                              <input class="form-control font-weight-bold" style="border-bottom: 2px solid;" data-inputmask="'mask': '99999-9999999-9'"  placeholder="XXXXX-XXXXXXX-X"  name="cnic" required="">
                                              <label class="font-weight-bold">Contact Number</label>
                                              <input name="number" type="text"  data-inputmask="'mask': '039999999999'" required type = "number" maxlength = "12" class="form-control font-weight-bold" style="border-bottom: 2px solid;">{% endcomment %}
                                              <label class="font-weight-bold">Preferred ISP</label> 
                                                    <select class="form-control font-weight-bold" name="isp" required>
                                                        <option value="No Info Available">No Info Available</option>
                                                        <option value="Telenor">Telenor</option>
                                                        <option value="Zong">Zong</option>
                                                        <option value="PTCL">PTCL</option>
                                                        <option value="Jazz">Jazz</option>
                                                    </select>
                                              <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                                              <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/jquery.inputmask.bundle.js"></script>
                                             <script>
                                              $(":input").inputmask();
                                             </script>
                                             <input type="submit" class="btn btn-outline-info btn-glow-info mt-3">
                                             {% else %}
                                             <label class="font-weight-bold" >Preferred ISP</label> 
                                             <input class="form-control font-weight-bold" style="border-bottom: 2px solid;" disabled value="No Info Available">
                                             {% endif %}
                                          </div>
                                          <div class="col-md-6">
                                              <label class="font-weight-bold">Location</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;">{{item.Location}}</label>
                                              <label class="font-weight-bold">Legal Entity</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.LegalEntity}}</label>
                                              <label class="font-weight-bold">Team</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.Team}}</label>
                                              <label class="font-weight-bold">Supervisor</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.Supervisor}}</label>
                                              <label class="font-weight-bold">Supervisor Email</label>
                                              <label class="form-control font-weight-bold" style="border-bottom: 2px solid;" >{{item.SupervisorEmail}}</label>
                                              {% comment %} {% if data2 == 'Active' %}
                                              <label class="font-weight-bold mt-4">Status:</label>
                                              <span class="badge badge-success m-2">{{data2}}</span>
                                              {% endif %} {% endcomment %}
                                          </div>
                                          {% endfor %}
                                        </div>
                                      </div>
                                     </form>
                                    </div>
                                    {% endif %}

                                    <table class="table table-hover">
                                      <tbody>
                                        {% for s in find %}
                                       <tr class="unread">
                                          <td><img class="rounded-circle" style="width:40px;" src="{{ ASSETS_ROOT }}/images/user/avatar-1.jpg" alt="activity-user">
                                          </td>
                                          <td>
                                              <h6 class="mb-1">{{s.name}}</h6>
                                              <p class="m-0">{{s.employee_id}}</p>
                                          </td>
                                          <td>
                                            <h6 class="text-muted"><i class="fas fa-circle f-10 m-r-15"></i>{{s.request_date}}</h6>
                                        </td>
                                        <td>
                                          <h6 class="text-muted"><i  class="fas fa-circle text-c-green f-10 m-r-15"></i>Completed Request</h6>
                                        </td>
                                      </tr>
                                      {% endfor %}
                                      </tbody>
                                    </table>
                            </div>
                            <!-- [ Main Content ] end -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- [ Main Content ] end -->

    <script>
        $(document).ready(function(){
        });
      </script>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Add jQuery library -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Add the DataTable JS file -->
<script type="text/javascript" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
{% endblock javascripts %}
